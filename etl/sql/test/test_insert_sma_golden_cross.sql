-- テストデータのクリーンアップ（必要に応じて）
-- DELETE FROM fact_sma WHERE calc_version = 'test_v1';

INSERT INTO fact_sma (time, currency_id, timeframe_id, period, calc_version, value)
VALUES
    -- 【ケース1: 通貨ID 1】 ゴールデンクロスが発生するケース
    -- 10:00時点: 短期(14) 100 <= 長期(28) 105 (まだクロス前)
    ('2024-01-01 10:00:00', 1, 1, 14, 'test_v1', 100.0),
    ('2024-01-01 10:00:00', 1, 1, 28, 'test_v1', 105.0),
    -- 11:00時点: 短期(14) 110 >  長期(28) 106 (ゴールデンクロス発生！) -> 1件検知されるべき
    ('2024-01-01 11:00:00', 1, 1, 14, 'test_v1', 110.0),
    ('2024-01-01 11:00:00', 1, 1, 28, 'test_v1', 106.0);

--     -- 【ケース2: 通貨ID 2】 すでに短期が高いまま維持されているケース（シグナルを出さない）
--     -- 10:00時点: 短期 120 > 長期 110
--     ('2024-01-01 10:00:00', 2, 60, 14, 'test_v1', 120.0),
--     ('2024-01-01 10:00:00', 2, 60, 28, 'test_v1', 110.0),
--     -- 11:00時点: 短期 125 > 長期 112 (継続中なので、新規クロスではない) -> 検知されないべき
--     ('2024-01-01 11:00:00', 2, 60, 14, 'test_v1', 125.0),
--     ('2024-01-01 11:00:00', 2, 60, 28, 'test_v1', 112.0),
--
--     -- 【ケース3: 通貨ID 3】 デッドクロス（短期が長期を下に抜ける）ケース（シグナルを出さない）
--     -- 10:00時点: 短期 110 > 長期 100
--     ('2024-01-01 10:00:00', 3, 60, 14, 'test_v1', 110.0),
--     ('2024-01-01 10:00:00', 3, 60, 28, 'test_v1', 100.0),
--     -- 11:00時点: 短期 95 < 長期 101 (デッドクロス) -> 検知されないべき
--     ('2024-01-01 11:00:00', 3, 60, 14, 'test_v1', 95.0),
--     ('2024-01-01 11:00:00', 3, 60, 28, 'test_v1', 101.0);